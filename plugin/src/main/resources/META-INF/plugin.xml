<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude" require-restart="false">
  <id>pdf-viewer-mustache-enhanced</id>
  <name>PDF Viewer Mustache Enhanced</name>
  <vendor email="ghenceanu.ciprian@gmail.com" url="https://github.com/FirstTimeInForever/intellij-pdf-viewer">
    Ciprian Ghenceanu
  </vendor>

  <depends>com.intellij.modules.platform</depends>
  <depends optional="true" config-file="texify-idea.xml">nl.rubensten.texifyidea</depends>

  <module-components>
    <component>
      <interface-class>com.firsttimeinforever.intellij.pdf.viewer.mustache.MustacheContextService</interface-class>
      <implementation-class>com.firsttimeinforever.intellij.pdf.viewer.mustache.MustacheContextServiceImpl</implementation-class>
    </component>
  </module-components>

  <extensions defaultExtensionNs="com.intellij">
    <fileType name="PDF"
              extensions="pdf"
              language="PDF"
              fieldName="INSTANCE"
              implementationClass="com.firsttimeinforever.intellij.pdf.viewer.lang.PdfFileType"/>
    <fileEditorProvider implementation="com.firsttimeinforever.intellij.pdf.viewer.ui.editor.PdfFileEditorProvider"/>
    <httpRequestHandler implementation="com.firsttimeinforever.intellij.pdf.viewer.jcef.PdfStaticServer"/>

    <registryKey defaultValue="true" key="pdf.viewer.debug" description="Enables PDF viewer debug mode"/>
    <registryKey defaultValue="10000" key="pdf.viewer.jcefLatchTimeout" description="Sets maximum wait time for the web-view to load"/>
    <registryKey defaultValue="false" key="pdf.viewer.enableExperimentalFeatures" description="Enables PDF viewer experimental features"/>
    <registryKey defaultValue="true" key="pdf.viewer.use.jcef.osr.view" description="Enables JCEF off-screen rendering"/>

    <applicationService serviceImplementation="com.firsttimeinforever.intellij.pdf.viewer.settings.PdfViewerSettings"/>
    <projectConfigurable instance="com.firsttimeinforever.intellij.pdf.viewer.settings.PdfViewerConfigurable"/>
    <errorHandler implementation="com.firsttimeinforever.intellij.pdf.viewer.report.PdfErrorReportSubmitter"/>
    <statusBarWidgetFactory id="com.firsttimeinforever.intellij.pdf.viewer.ui.widgets.PdfDocumentPageStatusBarWidget"
                            implementation="com.firsttimeinforever.intellij.pdf.viewer.ui.widgets.PdfDocumentPageStatusBarWidgetFactory"/>

    <toolWindow id="Mustache" anchor="right"
                factoryClass="com.firsttimeinforever.intellij.pdf.viewer.mustache.toolwindow.MustacheToolWindowFactory"/>
  </extensions>

  <applicationListeners>
    <listener class="com.firsttimeinforever.intellij.pdf.viewer.ui.widgets.PdfStatusBarProjectManagerListener"
              topic="com.intellij.openapi.project.ProjectManagerListener"/>
    <listener class="com.firsttimeinforever.intellij.pdf.viewer.settings.PdfViewerInvertColorsListener"
              topic="com.intellij.openapi.editor.colors.EditorColorsListener"/>
  </applicationListeners>

  <xi:include href="/META-INF/actions.xml" xpointer="xpointer(/idea-plugin/*)"/>
</idea-plugin>
